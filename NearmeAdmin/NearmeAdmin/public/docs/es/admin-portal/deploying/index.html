<!DOCTYPE html>
<html lang="es" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.41" />
    <meta name="description" content="Documentation for Nearme">
<meta name="author" content="Fernando Mendoza">

    <link rel="shortcut icon" href="/docs/images/favicon.png" type="image/x-icon" />
<link rel="icon" href="/docs/images/favicon.png" type="image/x-icon" />
    <title>Liberación :: Documentación de Nearme</title>
    
    
    <link href="/docs/css/nucleus.css?1529702475" rel="stylesheet">
    <link href="/docs/css/font-awesome.min.css?1529702475" rel="stylesheet">
    <link href="/docs/css/hybrid.css?1529702475" rel="stylesheet">
    <link href="/docs/css/featherlight.min.css?1529702475" rel="stylesheet">
    <link href="/docs/css/perfect-scrollbar.min.css?1529702475" rel="stylesheet">
    <link href="/docs/css/auto-complete.css?1529702475" rel="stylesheet">
    <link href="/docs/css/theme.css?1529702475" rel="stylesheet">
    <link href="/docs/css/hugo-theme.css?1529702475" rel="stylesheet">
    
      <link href="/docs/css/theme-blue.css?1529702475" rel="stylesheet">
    

    <script src="/docs/js/jquery-2.x.min.js?1529702475"></script>
    
    <style type="text/css">
      :root #header + #content > #left > #rlblock_left{ 
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/docs/es/admin-portal/deploying/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">
  <img height="50" src="/docs/images/logo.png" />
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fa fa-search"></i></label>
    <input data-search-input id="search-by" type="text" placeholder="Buscar...">
    <span data-search-clear=""><i class="fa fa-close"></i></span>
</div>

<script type="text/javascript" src="/docs/js/lunr.min.js?1529702475"></script>
<script type="text/javascript" src="/docs/js/auto-complete.js?1529702475"></script>
<script type="text/javascript">
    
        var baseurl = "\/docs\/es";
    
</script>
<script type="text/javascript" src="/docs/js/search.js?1529702475"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/docs/es/admin-portal/" title="Portal de administración" class="dd-item 
        parent
        
        
        ">
      <a href="/docs/es/admin-portal/">
          <b>1. </b>Portal de administración
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/docs/es/admin-portal/requirements/" title="Requerimientos" class="dd-item 
        
        
        
        ">
      <a href="/docs/es/admin-portal/requirements/">
          Requerimientos
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/docs/es/admin-portal/installation/" title="Instalación" class="dd-item 
        
        
        
        ">
      <a href="/docs/es/admin-portal/installation/">
          Instalación
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/docs/es/admin-portal/configuration/" title="Configuración" class="dd-item 
        
        
        
        ">
      <a href="/docs/es/admin-portal/configuration/">
          Configuración
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/docs/es/admin-portal/deploying/" title="Liberación" class="dd-item 
        parent
        active
        
        ">
      <a href="/docs/es/admin-portal/deploying/">
          Liberación
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/docs/es/mobile-app/" title="Aplicación móvil" class="dd-item 
        
        
        
        ">
      <a href="/docs/es/mobile-app/">
          <b>2. </b>Aplicación móvil
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/docs/es/mobile-app/requirements/" title="Requerimientos" class="dd-item 
        
        
        
        ">
      <a href="/docs/es/mobile-app/requirements/">
          Requerimientos
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/docs/es/mobile-app/configuration/" title="Configuración" class="dd-item 
        
        
        
        ">
      <a href="/docs/es/mobile-app/configuration/">
          Configuración
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/docs/es/mobile-app/deploying/" title="Liberación" class="dd-item 
        
        
        
        ">
      <a href="/docs/es/mobile-app/deploying/">
          Liberación
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/docs/es/release-notes/" title="Changelog" class="dd-item 
        
        
        
        ">
      <a href="/docs/es/release-notes/">
          <b></b>Changelog
          
            <i class="fa fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fa fa-fw fa-language"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en" value="/docs/en/admin-portal/deploying/">English</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="es" value="/docs/es/admin-portal/deploying/" selected>Español</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
       
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fa fa-fw fa-history"></i> Borrar Historial</a></li>         
      
      </ul>
    </section>
    
    <section id="footer">
      <center>
    <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fa fa-heart"></i></a> from <a href="https://quanlabs.com">Quanlabs</a>
</center>
    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fa fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
                  
                  <span class="links">
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/docs/es/'>Nearme. Ionic 2/3 Starter for Location Based Apps</a> > <a href='/docs/es/admin-portal/'>Portal de administración</a> > Liberación
          
         
          
         
          
           
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#configurar-repositorio-git">Configurar repositorio Git</a></li>
<li><a href="#configurar-variables-de-entorno">Configurar variables de entorno</a></li>
</ul></li>
<li><a href="#configurar-la-api-key-de-google-maps">Configurar la API Key de Google Maps</a></li>
<li><a href="#configurar-mailgun">Configurar Mailgun</a></li>
<li><a href="#configurar-notificationes-push">Configurar Notificationes Push</a>
<ul>
<li><a href="#activar-notificaciones-para-android">Activar notificaciones para Android</a></li>
<li><a href="#activar-notificaciones-para-ios">Activar notificaciones para iOS</a></li>
</ul></li>
<li><a href="#configurar-ssl-con-let-s-encrypt-opcional">Configurar SSL con Let&rsquo;s Encrypt (Opcional)</a></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            

        
        <div id="body-inner">
          
            <h1>Liberación</h1>
          

        




<p>Las instrucciones de la sección Configuración se ejecutaron del lado del servidor. Los siguientes comandos deberán ejecutarse en la carpeta del código fuente del portal web.</p>

<h3 id="configurar-repositorio-git">Configurar repositorio Git</h3>

<p>Inicializa un nuevo repositorio.</p>

<pre><code class="language-bash">mycomputer@NearmeAdmin:~$ git init
</code></pre>

<p>Añade todos los archivos al repositorio.</p>

<pre><code class="language-bash">mycomputer@NearmeAdmin:~$ git add .
</code></pre>

<p>Confirma los cambios hechos al repositorio.</p>

<pre><code class="language-bash">mycomputer@NearmeAdmin:~$ git commit -m &quot;Se añadió el código fuente del portal web de Nearme&quot;
</code></pre>

<p>Añade un remoto llamado <em>dokku</em> donde el código será <em>empujado</em>.</p>

<pre><code class="language-bash">mycomputer@NearmeAdmin:~$ git remote add dokku dokku@46.101.4.76:nearme
</code></pre>

<h3 id="configurar-variables-de-entorno">Configurar variables de entorno</h3>

<p>Dado que Dokku funciona sobre Docker, aprovecharemos las variables de entorno para configurar aspectos importantes del portal web antes de proceder con la liberación del código.</p>

<p>Abre el <em>Dockerfile</em> localizado en la raíz del código del portal web. En este archivo hemos declarado todas las variables entornos que podemos configurar. Por el momento la única necesaria para instalar el portal web es <code>SERVER_URL</code>, la cuál tenemos que establecerla con la URL qué configuramos en el paso de las DNS. En nuestro quedaría así:</p>

<pre><code class="language-bash">ENV SERVER_URL http://nearme.quanlabs.com
</code></pre>

<p>Luego veremos con más detalle las demás variables.</p>

<p>Guarda los cambios hechos al Dockerfile y confirma los cambios al repositorio. Una vez más:</p>

<pre><code class="language-bash">mycomputer@NearmeAdmin:~$ git add .
</code></pre>

<p>Confirma los cambios hechos al repositorio.</p>

<pre><code class="language-bash">mycomputer@NearmeAdmin:~$ git commit -m &quot;Se actualizó la variable SERVER_URL en el Dockerfile&quot;
</code></pre>

<p>Ahora sí, ya tenemos todo listo para empujar los cambios al servidor.</p>

<pre><code class="language-bash">mycomputer@NearmeAdmin:~$ git push dokku master
</code></pre>

<p>Esperamos unos minutos y al final debemos ver un mensaje de éxito de que la aplicación ha sido liberada correctamente.</p>

<p>Si todo salió bien, entrando a la URL del portal web (en nuestro caso <a href="http://nearme.quanlabs.com">http://nearme.quanlabs.com</a>) debemos ver la pantalla de inicio de sesión.</p>

<p>Para terminar abre la página de instalación disponible en la ruta <code>/install</code> y llena el formulario para crear el usuario administrador.</p>

<p>Eso es todo! A continuación veremos cómo configurar algunos aspectos para garantizar el correcto funcionamiento del portal web.</p>

<h2 id="configurar-la-api-key-de-google-maps">Configurar la API Key de Google Maps</h2>

<p>Google Maps requiere que cualquier llamada a su API cuente con una llave. Esta llave la podemos generar en un par de minutos siguiendo la <a href="https://developers.google.com/maps/documentation/javascript/get-api-key">guía</a> disponible en el portal de desarrolladores de Google.</p>

<p>Teniendo la llave lista, abre el Dockerfile y actualiza la variable <code>GOOGLE_MAPS_API_KEY</code>.</p>

<pre><code>ENV GOOGLE_MAPS_API_KEY AIzaXXXXXXXXXXXXXXXXXXXXXXXXXXX
</code></pre>

<h2 id="configurar-mailgun">Configurar Mailgun</h2>

<p>Mailgun nos permite enviar correos a través de una API flexible y sin la necesidad de instalar software extra en el servidor.</p>

<p>Es necesario configurar Mailgun para que la función de recuperación de contraseña vía correo electrónico funcione correctamente.</p>

<p>Primero entra a la página web de <a href="https://www.mailgun.com/">Mailgun</a> y crea una nueva cuenta.</p>

<p>En el panel de administración agrega un nuevo dominio. Es recomendable usar el mismo dominio de la app. Después de agregar el dominio tendrás que verificar el dominio. Sigue los pasos descritos en el portal de Mailgun.</p>

<p>Luego en los detalles del dominio encontrarás la <code>API Key</code>. Abre el Dockerfile y actualiza las variables de Mailgun. Ejemplo:</p>

<pre><code class="language-bash">ENV MAILGUN_API_KEY key-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
ENV MAILGUN_DOMAIN quanlabs.com
ENV MAILGUN_FROM_ADDRESS 'QuanLabs &lt;dev@quanlabs.com&gt;'
ENV MAILGUN_TO_ADDRESS 'dev@quanlabs.com'
</code></pre>

<h2 id="configurar-notificationes-push">Configurar Notificationes Push</h2>

<p>En el portal web tenemos la posibilidad de enviar notificaciones push a los usuarios. Para que esto funcione en dispositivos con Android primero debemos primero generar el <code>Sender ID</code> y el <code>API Key</code> desde la consola para desarrolladores de Firebase. En el caso de dispositivos con iOS debemos generar los certificados desde nuestra cuenta de desarrolladores de Apple.</p>

<h3 id="activar-notificaciones-para-android">Activar notificaciones para Android</h3>

<ol>
<li>En tu navegador web visita la <a href="https://console.firebase.google.com">consola de Firebase</a> e inicia sesión con tu cuenta de Google.</li>
<li>Crea un nuevo proyecto.</li>
<li>Haz click en el ícono del engrane que se encuentra en la parte superior izquierda y selecciona la opción <em>Project Settings</em></li>
<li>Haz click en la pestaña <em>Cloud Messaging</em></li>
<li>Copia el <em>Legacy Server Key</em> y el <em>Sender ID</em></li>
<li>Abre el Dockerfile y actualiza las variables <code>PUSH_ANDROID_SENDER_ID</code> y <code>PUSH_ANDROID_API_KEY</code></li>
</ol>

<p>Ejemplo:</p>

<pre><code class="language-bash">ENV PUSH_ANDROID_SENDER_ID XXXXXXXXXXX
ENV PUSH_ANDROID_API_KEY AIzaXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
</code></pre>

<h3 id="activar-notificaciones-para-ios">Activar notificaciones para iOS</h3>

<p>Para seguir los pasos a continuación es necesario contar con una cuenta de desarrollador de Apple y una Mac. Si cumplimos estos requisitos tenemos que hacer lo siguiente desde el portal de desarolladores:</p>

<ol>
<li>Crear un nuevo App ID con el servicio de notificaciones habilitado.</li>
<li>Crear el certificado de notificaciones en modo de desarrollo y producción.</li>
<li>Descargar e instalar los certificados en tu ordenador.</li>
<li>Exportar los certificados a formato P12.</li>
<li>Copiar los certificados .P12 a la carpeta <code>/push</code> localizada en el código fuente del portal web.</li>
</ol>

<p><a href="http://recordit.co/kFpQR4Vo4R"><img src="/docs/images/setup-push-ios.gif" alt="Setup iOS Push Notifications" /></a>
Haz click sobre la imagen para ver el video completo.</p>

<div class="notices note" ><p>Al momento de crear el App ID es importante seleccionar la opción con el sufijo explícito. Es recomendable establecer este ID con nuestro dominio en forma inversa. Por ejemplo en nuestro caso quedaría así <code>com.quanlabs.nearme</code></p>
</div>


<p>Abre el Dockerfile y actualiza la variable <code>PUSH_IOS_BUNDLE_ID</code> con el mismo App ID que configuramos en el portal de Apple.</p>

<pre><code class="language-bash">ENV PUSH_IOS_BUNDLE_ID com.quanlabs.nearme
</code></pre>

<h2 id="configurar-ssl-con-let-s-encrypt-opcional">Configurar SSL con Let&rsquo;s Encrypt (Opcional)</h2>

<p>Este paso es opcional pero vale la pena hacerlo para garantizar que las comunicaciones entre el servidor y la aplicación móvil sean encriptadas.</p>

<p>Primero entramos vía SSH al servidor y ejecutamos lo siguiente para instalar el plugin de Let&rsquo;s Encrypt.</p>

<pre><code class="language-bash">server@root:~$ dokku plugin:install https://github.com/dokku/dokku-letsencrypt.git
</code></pre>

<p>Encriptar la app.</p>

<pre><code class="language-bash">server@root:~$ dokku letsencrypt nearme
</code></pre>

<p>Y por último abre el Dockerfile y ajusta el valor de la variable <code>SERVER_URL</code> a <code>https</code></p>

<pre><code class="language-bash">ENV SERVER_URL https://nearme.quanlabs.com
</code></pre>

<div class="notices note" ><p>Cada vez que hagamos algún cambio en el código fuente del portal web (Ej.: Modificar el Dockerfile) tenemos que hacer el flujo de Git para reflejar los cambios en el servidor: añadir los archivos al repositorio, confirmar los cambios y finalmente empujarlos con el comando <code>git push</code></p>
</div>



<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


        
            <a class="nav nav-prev" href="/docs/es/admin-portal/configuration/" title="Configuración"> <i class="fa fa-chevron-left"></i></a>
        
        
            <a class="nav nav-next" href="/docs/es/mobile-app/" title="Aplicación móvil" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
        
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/docs/js/clipboard.min.js?1529702475"></script>
    <script src="/docs/js/perfect-scrollbar.min.js?1529702475"></script>
    <script src="/docs/js/perfect-scrollbar.jquery.min.js?1529702475"></script>
    <script src="/docs/js/jquery.sticky.js?1529702475"></script>
    <script src="/docs/js/featherlight.min.js?1529702475"></script>
    <script src="/docs/js/html5shiv-printshiv.min.js?1529702475"></script>
    <script src="/docs/js/highlight.pack.js?1529702475"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/docs/js/modernizr.custom.71422.js?1529702475"></script>
    <script src="/docs/js/learn.js?1529702475"></script>
    <script src="/docs/js/hugo-learn.js?1529702475"></script>

    <link href="/docs/mermaid/mermaid.css?1529702475" type="text/css" rel="stylesheet" />
    <script src="/docs/mermaid/mermaid.js?1529702475"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-105947713-1', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
